#include <stdio.h>
#include <string.h>

#define MAX_LEN 20

int main(void) {
    char input[MAX_LEN], cipher[MAX_LEN], decrypted[MAX_LEN];
    int length, i, j, k;

    printf("\n\t\tRAIL FENCE TECHNIQUE\n\nEnter the input string: ");
    fgets(input, sizeof(input), stdin);
    length = strlen(input);
    input[length - 1] = '\0';  // Removing newline character

    // Encryption
    for (i = 0, j = 0; i < length; i += 2) cipher[j++] = input[i];
    for (i = 1; i < length; i += 2) cipher[j++] = input[i];
    cipher[j] = '\0';

    printf("\nCipher text after applying rail fence: %s", cipher);

    // Decryption
    k = (length % 2 == 0) ? (length / 2) : ((length / 2) + 1);
    for (i = 0, j = 0; i < k; i++) decrypted[j++] = cipher[i];
    for (i = k; i < length; i++) decrypted[j++] = cipher[i];
    decrypted[j] = '\0';

    printf("\nText after decryption: %s\n", decrypted);

    return 0;
}
