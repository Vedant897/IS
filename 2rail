#include <stdio.h>
#include <string.h>

int main(void) {
    char a[20], c[20], d[20];
    int l, i, j, k;

    printf("\n\t\tRAIL FENCE TECHNIQUE\n\nEnter the input string: ");
    fgets(a, sizeof(a), stdin);
    l = strlen(a);

    // Ciphering
    j = 0;
    for (i = 0; i < l; i += 2)
        c[j++] = a[i];
    for (i = 1; i < l; i += 2)
        c[j++] = a[i];
    c[j] = '\0';

    printf("\nCipher text after applying rail fence: %s", c);

    // Deciphering
    k = (l % 2 == 0) ? (l / 2) : ((l / 2) + 1);
    j = 0;
    for (i = 0; i < k; i++)
        d[j++] = c[i];
    for (i = k; i < l; i++)
        d[j++] = c[i];
    d[j] = '\0';

    printf("\nText after decryption: %s", d);

    return 0;
}
